<% provide(:title, t('layouts.navigation.persons')) %>

<div class="container">
  <h2><%= yield(:title) %></h2>

  <div id="persons-query-fields" class="form-inline">
    <div class="form-group">
      <%= select_tag(:region, content_tag(:option, t('.all_regions'), value: "all") + grouped_options_for_select(@regions, params[:region]), class: "form-control") %>
    </div>
    <div id="search-box" class="form-group">
      <div class="input-group">
        <%= content_tag :span, icon("search"), class: "input-group-addon" %>
        <%= text_field_tag :search, params[:search], placeholder: t('.name_or_wca_id'), class: "form-control" %>
      </div>
    </div>
  </div>

  <%= wca_table table_class: "persons-table",
                data: { toggle: "table", pagination: true, side_pagination: "server", url: persons_path,
                        query_params: "queryParams" } do %>
    <thead>
      <tr>
        <th class="name" data-field="name"><%=t '.name' %></th>
        <th class="wca-id" data-field="wca_id"><%=t 'common.wca_id' %></th>
        <th class="country" data-field="country"><%=t '.country' %></th>
      </tr>
    </thead>
  <% end %>
</div>
